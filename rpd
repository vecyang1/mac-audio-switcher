# AudioSwitch Pro - Product Design Document

## Executive Summary

AudioSwitch Pro is a native macOS application that provides seamless audio output device switching through customizable keyboard shortcuts. The app runs automatically on startup, continuously monitors available audio devices, and enables instant switching between MacBook speakers and connected audio devices (particularly AirPods) with a single keystroke.

## Product Vision

### Problem Statement
Mac users frequently switch between different audio output devices (MacBook speakers, AirPods, external speakers) throughout their day. The current process requires:
1. Clicking the Sound icon in the menu bar
2. Navigating through the dropdown menu
3. Selecting the desired output device
4. Repeating this process multiple times daily

This repetitive task interrupts workflow and reduces productivity, especially for users who frequently transition between meetings, music listening, and focused work sessions.

### Solution
AudioSwitch Pro eliminates this friction by:
- Providing instant audio device switching via keyboard shortcuts
- Running seamlessly in the background with minimal resource usage
- Offering real-time device detection and status monitoring
- Supporting custom shortcuts for different switching scenarios

## Target Users

### Primary Users
1. **Remote Workers**: Frequently switch between video calls (AirPods) and ambient work (speakers)
2. **Content Creators**: Need quick audio switching for recording, editing, and reviewing
3. **Developers**: Switch between focused coding (AirPods) and collaborative sessions (speakers)
4. **Students**: Transition between online classes and personal study sessions

### User Personas

**Sarah - Remote Product Manager**
- Switches audio devices 15+ times daily between meetings and focused work
- Values efficiency and minimal interruption to workflow
- Needs reliable, instant switching without UI interaction

**Alex - Video Editor**
- Requires precise audio control for different editing phases
- Switches between monitoring speakers and reference headphones
- Needs visual confirmation of active device

## Core Features

### 1. Automatic Startup
- Launch on macOS login
- Minimal boot time impact (<100ms)
- Silent background operation
- No splash screen or startup notifications

### 2. Real-time Device Monitoring
- Continuous scanning for audio device changes
- Instant detection of new devices (Bluetooth/wired)
- Automatic removal of disconnected devices
- Device connection status indicators

### 3. Keyboard Shortcut System
- **Primary Toggle**: Switch between last two used devices
- **Device-Specific Shortcuts**: Direct switch to specific devices
- **Custom Shortcut Configuration**: User-defined key combinations
- **Conflict Detection**: Prevents overlap with system shortcuts

### 4. Smart Device Management
- Favorite devices with priority ordering
- Device naming and aliasing
- Connection history tracking
- Automatic device preference learning

### 5. Menu Bar Integration
- Minimal menu bar icon with device status
- Quick access dropdown for manual switching
- Visual feedback for active device
- Battery status for Bluetooth devices (when available)

## Technical Architecture

### Core Technologies
- **Language**: Swift 5.5+
- **Framework**: SwiftUI for UI, AppKit for system integration
- **Audio Framework**: Core Audio / AVAudioSession
- **Bluetooth**: Core Bluetooth for device detection
- **Distribution**: Direct download & Mac App Store

### System Requirements
- macOS 11.0 (Big Sur) or later
- Apple Silicon (M1/M2) and Intel support
- Minimal storage: ~10MB
- Memory usage: <50MB active

### Key Components

1. **Audio Device Manager**
   - Core Audio integration for device enumeration
   - Real-time device change notifications
   - Audio route switching implementation

2. **Shortcut Handler**
   - Global hotkey registration
   - Conflict resolution system
   - Customization interface

3. **Device Monitor Service**
   - Background daemon process
   - Bluetooth device scanning
   - USB/Thunderbolt device detection

4. **User Interface Layer**
   - Menu bar application
   - Settings window (SwiftUI)
   - Onboarding flow

## User Interface Design

### Menu Bar Icon States
1. **Active Device Indicator**
   - Speaker icon: MacBook speakers active
   - Headphone icon: AirPods/headphones active
   - Custom icons for other devices

2. **Connection Status**
   - Solid icon: Device connected and active
   - Dimmed icon: Device available but not active
   - Alert badge: Connection issues

### Settings Window
1. **General Tab**
   - Startup preferences
   - Default device selection
   - Notification preferences

2. **Shortcuts Tab**
   - Global toggle shortcut configuration
   - Device-specific shortcut assignment
   - Shortcut conflict warnings

3. **Devices Tab**
   - Available devices list
   - Device renaming
   - Favorite device management
   - Connection history

### Onboarding Flow
1. Welcome screen with feature overview
2. Accessibility permissions request
3. Default shortcut configuration
4. Device detection and initial setup

## User Experience Flow

### First Launch
1. App requests accessibility permissions for global shortcuts
2. Automatic device detection begins
3. User configures primary toggle shortcut
4. App minimizes to menu bar

### Daily Usage
1. User presses configured shortcut (e.g., %A)
2. Audio instantly switches to alternate device
3. Brief notification confirms switch (optional)
4. Menu bar icon updates to reflect change

### Device Management
1. New device connected ’ Automatic detection
2. Notification asks if device should be added to favorites
3. User can assign specific shortcut if desired
4. Device appears in quick-switch rotation

## Security & Privacy

### Permissions Required
- **Accessibility**: For global keyboard shortcuts
- **Bluetooth**: For wireless device detection
- **Notifications**: For device change alerts (optional)

### Privacy Considerations
- No network connections required
- No user data collection
- All preferences stored locally
- No analytics or tracking

## Performance Targets

### Metrics
- **Switch Speed**: <50ms from keypress to audio route change
- **CPU Usage**: <1% during idle monitoring
- **Memory**: <50MB total footprint
- **Battery Impact**: Negligible (<0.1% per hour)

### Optimization Strategies
- Efficient Core Audio callbacks
- Throttled device scanning
- Lazy UI rendering
- Native Swift performance

## Development Roadmap

### Phase 1: MVP (Weeks 1-4)
- Core audio switching functionality
- Basic keyboard shortcut support
- Menu bar presence
- Manual device selection

### Phase 2: Enhanced Features (Weeks 5-8)
- Custom shortcut configuration
- Device favorites and naming
- Improved UI/UX
- Auto-start implementation

### Phase 3: Polish & Distribution (Weeks 9-12)
- Performance optimization
- Comprehensive testing
- App Store preparation
- Documentation and website

### Phase 4: Post-Launch (Ongoing)
- User feedback integration
- Additional device support
- Advanced features based on usage data
- Regular maintenance updates

## Success Metrics

### Quantitative
- Daily active usage rate >80%
- Average switches per day: 10+
- Switch success rate >99.9%
- User retention at 30 days: >70%

### Qualitative
- User satisfaction score >4.5/5
- Reduced friction in audio switching workflow
- Positive impact on productivity
- Strong word-of-mouth recommendations

## Competitive Analysis

### Direct Competitors
1. **Sound Source** - Full-featured but complex, $39
2. **ToothFairy** - Bluetooth-focused, limited switching, $4.99
3. **Audio Switcher** - Basic functionality, outdated UI, free

### Competitive Advantages
- Native macOS design language
- Instant keyboard-driven switching
- Minimal resource usage
- Smart device learning
- Free with optional Pro features

## Monetization Strategy

### Freemium Model
**Free Tier**
- Basic two-device switching
- One custom shortcut
- Menu bar access

**Pro Tier ($9.99 one-time)**
- Unlimited device shortcuts
- Advanced device management
- Priority support
- Future feature access

## Risk Analysis

### Technical Risks
- macOS API changes affecting audio routing
- Bluetooth connectivity reliability
- Keyboard shortcut conflicts with other apps

### Mitigation Strategies
- Regular compatibility testing with macOS betas
- Robust error handling for connection issues
- Comprehensive shortcut conflict detection

## Conclusion

AudioSwitch Pro addresses a genuine daily friction point for Mac users with an elegant, efficient solution. By focusing on speed, simplicity, and reliability, the app will become an essential utility for anyone who regularly switches between audio devices on macOS.